{{- $server   := false -}}
{{- $headless := false -}}
{{- $mobile   := false -}}
{{- $termux   := false -}}
{{- $windows  := false -}}
{{- $cygwin   := false -}}
{{- $darwin   := false -}}
{{- $linux    := false -}}
{{- $headful  := false -}}
{{- "" -}}

{{- if eq .chezmoi.os "linux" -}}
{{-   $linux = true -}}
{{-   if or (eq (env "XDG_SESSION_TYPE") "tty" "") (ne (env "SSH_TTY") "") -}}
{{-     $server = true   -}}
{{-     $headless = true -}}
{{-   end -}}
{{- else if eq .chezmoi.os "windows" -}}
{{-   $windows = true -}}
{{- else if eq .chezmoi.os "darwin" -}}
{{-   $darwin = true -}}
{{- else if eq .chezmoi.os "android" -}}
{{-   $mobile = true -}}
{{-   $termux = true -}}
{{-   $linux  = true -}}
{{- end -}}

[data]
    # Autogenerated to derive variables, do not edit. os='{{ .chezmoi.os }}', $OSTYPE='{{ env "OSTYPE" }}', $HOME='{{ env "HOME" }}'.
    server   = {{ $server }}
    headless = {{ $headless }}
    headful  = {{ not $headless }}
    mobile   = {{ $mobile }}

    termux   = {{ $termux }}
    windows  = {{ $windows }}
    linux    = {{ $linux }}
    darwin   = {{ $darwin }}
    cygwin   = {{ $windows }}

[diff]
{{- if or $headless $termux }}
    command = "nvim"
    args = ["-d", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]
{{- else }}
    command = "meld"
    args = ["--diff", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]
{{- end }}
